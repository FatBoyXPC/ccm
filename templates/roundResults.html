<template name="roundResults">
  <div class="container">
    <p>
      {{eventName roundEventCode}}: {{roundName roundRoundCode}}
      {{formatName roundFormatCode}}
    </p>

    {{> roundResultsList roundId=roundId competitionUrlId=competitionUrlId}}

  </div>
</template>

<template name="roundResultsList">
  {{#with roundId=roundId competitionId=roundCompetitionId competitionUrlId=competitionUrlId}}
    <div class="row">
      {{#if ../selectCompetitor}}
        <div class="col-xs-12 col-sm-4">
          <div class="results-sidebar">
            {{> inputAutocomplete settings=autocompleteSettings id="inputCompetitorName" class="form-control" placeholder="Competitor name"}}

            {{> UI.contentBlock}}
          </div>
        </div>
      {{/if}}
      <div class="{{#if ../selectCompetitor}}col-xs-12 col-sm-7{{/if}}">
        <table class="table">
          <thead>
            <tr>
              <th></th>
              <th>Name</th>
              <th class="results-average text-right">
                {{roundCumulativeResultFieldName}}
              </th>
              <th class="results-best text-right">Best</th>
              <th class="text-center" colspan="{{solveCount}}">Solves</th>
            </tr>
          </thead>
          <tbody>
            {{#with resultsData}}
              {{#each results}}
                <tr class="{{#if competitorAdvanced}}competitor-advanced{{/if}}">
                  <td>{{position}}</td>
                  <td>
                    {{#if ../../competitionUrlId}}
                      <a href="{{pathFor 'competitorResults' competitionUrlId=../../competitionUrlId competitorName=competitorName }}">
                        {{competitorName}}
                      </a>
                    {{else}}
                      {{competitorName}}
                    {{/if}}
                  </td>
                  <td class="results-average text-right {{#if isPrimarySortField 'average'}}results-primary-sort-field{{/if}}">{{clockFormat average}}</td>
                  <td class="results-best text-right {{#if isPrimarySortField 'best'}}results-primary-sort-field{{/if}}">{{clockFormat best}}</td>
                  {{#each solves}}
                    <td class="results-solve text-right">{{clockFormat this}}</td>
                  {{/each}}
                </tr>
                {{#if drawAdvanceLine}}
                  <hr>
                {{/if}}
              {{/each}}
            {{/with}}
          </tbody>
        </table>
      </div>
    </div>
  {{/with}}
</template>

<template name="roundResults_namePill">
  <span>{{{highlightedName}}}</span>
</template>
